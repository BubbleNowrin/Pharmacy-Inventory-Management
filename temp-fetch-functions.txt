  const fetchMedications = async () => {
    try {
      const token = localStorage.getItem("token");
      const response = await fetch("/api/medications", {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      const data = await response.json();
      console.log("Medications fetched:", data.medications?.length || 0);
      setMedications(data.medications || []);
    } catch (error) {
      console.error("Failed to fetch medications:", error);
      toast({
        title: "Error",
        description: "Failed to fetch medications",
        variant: "destructive",
      });
    }
  };

  const fetchAdjustments = async () => {
    try {
      const token = localStorage.getItem("token");
      const response = await fetch("/api/adjustments", {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      const data = await response.json();
      setAdjustments(data.adjustments || []);
    } catch (error) {
      console.error("Failed to fetch adjustments:", error);
    }
  };
